import{d as x,b as S,s as m}from"./app.min.js";import"./slider.min.js";function T(){const r=document.querySelectorAll("[data-showmore]");let e,t;r.length&&(e=Array.from(r).filter(function(o,n,s){return!o.dataset.FLSShowmoreMedia}),e.length&&c(e),document.addEventListener("click",y),window.addEventListener("resize",y),t=x(r,"FLSShowmoreMedia"),t&&t.length&&(t.forEach(o=>{o.matchMedia.addEventListener("change",function(){c(o.itemsArray,o.matchMedia)})}),d(t)));function d(o){o.forEach(n=>{c(n.itemsArray,n.matchMedia)})}function c(o,n){o.forEach(s=>{p(s,n)})}function p(o,n=!1){o=n?o.item:o;let s=o.querySelectorAll("[data-showmore-content]"),l=o.querySelectorAll("[data-showmore-button]");s=Array.from(s).filter(a=>a.closest("[data-showmore]")===o)[0],l=Array.from(l).filter(a=>a.closest("[data-showmore]")===o)[0];const i=f(o,s);n.matches||!n?i<w(s)?(S(s,0,o.classList.contains("--showmore-active")?w(s):i),l.hidden=!1):(m(s,0,i),l.hidden=!0):(m(s,0,i),l.hidden=!0)}function f(o,n){let s=0;const l=o.dataset.FLSShowmore?o.dataset.FLSShowmore:"size",i=parseFloat(getComputedStyle(n).rowGap)?parseFloat(getComputedStyle(n).rowGap):0;if(l==="items"){const a=n.dataset.FLSShowmoreContent?n.dataset.FLSShowmoreContent:3,u=n.children;for(let h=1;h<u.length;h++){const g=u[h-1],L=parseFloat(getComputedStyle(g).marginTop)?parseFloat(getComputedStyle(g).marginTop):0,v=parseFloat(getComputedStyle(g).marginBottom)?parseFloat(getComputedStyle(g).marginBottom):0;if(s+=g.offsetHeight+L,h==a)break;s+=v}i&&(s+=(a-1)*i)}else s=n.dataset.FLSShowmoreContent?n.dataset.FLSShowmoreContent:150;return s}function w(o){let n,s=o.offsetHeight;o.style.removeProperty("height"),o.closest("[hidden]")&&(n=o.closest("[hidden]"),n.hidden=!1);let l=o.offsetHeight;return n&&(n.hidden=!0),o.style.height=`${s}px`,l}function y(o){const n=o.target,s=o.type;if(s==="click"){if(n.closest("[data-showmore-button]")){const i=n.closest("[data-showmore-button]").closest("[data-showmore]"),a=i.querySelector("[data-showmore-content]"),u=i.dataset.FLSShowmoreButton?i.dataset.FLSShowmoreButton:"500",h=f(i,a);a.classList.contains("--slide")||(i.classList.contains("--showmore-active")?S(a,u,h):m(a,u,h),i.classList.toggle("--showmore-active"))}}else s==="resize"&&(e&&e.length&&c(e),t&&t.length&&d(t))}}window.addEventListener("load",T);class A{constructor(e){if(!e){console.error("Dropdown \u044D\u043B\u0435\u043C\u0435\u043D\u0442 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D");return}if(this.dropdown=e,this.toggle=e.querySelector("[data-dropdown-toggle]"),this.menu=e.querySelector("[data-dropdown-menu]"),!this.toggle||!this.menu){console.error("\u041D\u0435 \u0432\u0441\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B dropdown \u043D\u0430\u0439\u0434\u0435\u043D\u044B",e);return}if(this.items=Array.from(this.menu.children).filter(t=>t.hasAttribute("data-value")),this.items.length===0){console.error("\u0412 \u043C\u0435\u043D\u044E dropdown \u043D\u0435\u0442 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0441 data-value",e);return}this.isOpen=!1,this.selectedValue=null,this.placeholderText=this.toggle.textContent.trim(),this.init()}init(){this.toggle.addEventListener("click",e=>{e.stopPropagation(),this.toggleMenu()}),this.items.forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation(),this.selectItem(e)})}),document.addEventListener("click",e=>{this.dropdown.contains(e.target)||this.close()}),this.dropdown.addEventListener("dropdown:opening",()=>{document.querySelectorAll("[data-dropdown]").forEach(e=>{if(e!==this.dropdown){const t=e._dropdownInstance;t&&t.isOpen&&t.close()}})}),this.dropdown._dropdownInstance=this}toggleMenu(){this.isOpen?this.close():this.open()}open(){this.dropdown.dispatchEvent(new Event("dropdown:opening")),this.isOpen=!0,this.toggle.classList.add("active"),this.menu.classList.add("show")}close(){this.isOpen=!1,this.toggle.classList.remove("active"),this.menu.classList.remove("show")}selectItem(e){if(!e)return;this.items.forEach(c=>c.classList.remove("selected")),e.classList.add("selected"),this.selectedValue=e.dataset.value;const t=e.textContent.trim(),d=this.toggle.querySelector(".dropdown-text");if(d)d.textContent=t;else{const c=Array.from(this.toggle.childNodes).find(p=>p.nodeType===Node.TEXT_NODE);c?c.textContent=t:this.toggle.insertBefore(document.createTextNode(t),this.toggle.firstChild)}this.close(),this.dropdown.dispatchEvent(new CustomEvent("dropdown:change",{detail:{value:this.selectedValue,text:t,dropdown:this.dropdown}}))}getValue(){return this.selectedValue}getText(){return this.toggle.textContent.trim()}reset(){this.items.forEach(t=>t.classList.remove("selected"));const e=this.toggle.querySelector(".dropdown-text");if(e)e.textContent=this.placeholderText;else{const t=Array.from(this.toggle.childNodes).find(d=>d.nodeType===Node.TEXT_NODE);t&&(t.textContent=this.placeholderText)}this.selectedValue=null}}function E(){const r=document.querySelectorAll("[data-dropdown]");if(r.length===0){console.warn("Dropdown \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435");return}r.forEach(e=>{new A(e)}),console.log(`\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u043E ${r.length} dropdown(\u043E\u0432)`)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E(),document.addEventListener("keydown",r=>{r.key==="Escape"&&document.querySelectorAll("[data-dropdown]").forEach(e=>{const t=e._dropdownInstance;t&&t.isOpen&&t.close()})}),document.addEventListener("dropdown:change",r=>{console.log("\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 dropdown:",r.detail);const e=[];document.querySelectorAll("[data-dropdown]").forEach(t=>{const d=t._dropdownInstance;d&&d.getValue()&&e.push(`${d.getText()}: ${d.getValue()}`)}),document.getElementById("result").textContent=e.length>0?e.join(" | "):"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u043E"});
